import{l as w,m as v,H as g}from"./entry.970bf235.js";import{u as s}from"./pedido.40310641.js";import{h as l}from"./moment.fbc5633a.js";/*!
 * paypal-js v5.1.4 (2022-11-29T23:08:21.847Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(t,r){var e=document.querySelector('script[src="'.concat(t,'"]'));if(e===null)return null;var n=p(t,r),o=e.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(n.dataset).length)return null;var a=!0;return Object.keys(o.dataset).forEach(function(i){o.dataset[i]!==n.dataset[i]&&(a=!1)}),a?e:null}function S(t){var r=t.url,e=t.attributes,n=t.onSuccess,o=t.onError,a=p(r,e);a.onerror=o,a.onload=n,document.head.insertBefore(a,document.head.firstElementChild)}function y(t){var r="https://www.paypal.com/sdk/js";t.sdkBaseURL&&(r=t.sdkBaseURL,delete t.sdkBaseURL),R(t);var e=Object.keys(t).filter(function(a){return typeof t[a]<"u"&&t[a]!==null&&t[a]!==""}).reduce(function(a,i){var d=t[i].toString();return i.substring(0,5)==="data-"?a.dataAttributes[i]=d:a.queryParams[i]=d,a},{queryParams:{},dataAttributes:{}}),n=e.queryParams,o=e.dataAttributes;return{url:"".concat(r,"?").concat(A(n)),dataAttributes:o}}function A(t){var r="";return Object.keys(t).forEach(function(e){r.length!==0&&(r+="&"),r+=e+"="+t[e]}),r}function _(t){var r=t.split("/* Original Error:")[1];return r?r.replace(/\n/g,"").replace("*/","").trim():t}function p(t,r){r===void 0&&(r={});var e=document.createElement("script");return e.src=t,Object.keys(r).forEach(function(n){e.setAttribute(n,r[n]),n==="data-csp-nonce"&&e.setAttribute("nonce",r["data-csp-nonce"])}),e}function R(t){var r=t["merchant-id"],e=t["data-merchant-id"],n="",o="";return Array.isArray(r)?r.length>1?(n="*",o=r.toString()):n=r.toString():typeof r=="string"&&r.length>0?n=r:typeof e=="string"&&e.length>0&&(n="*",o=e),t["merchant-id"]=n,t["data-merchant-id"]=o,t}function x(t,r){if(r===void 0&&(r=h()),m(t,r),typeof window>"u")return r.resolve(null);var e=y(t),n=e.url,o=e.dataAttributes,a=o["data-namespace"]||"paypal",i=f(a);return E(n,o)&&i?r.resolve(i):j({url:n,attributes:o},r).then(function(){var d=f(a);if(d)return d;throw new Error("The window.".concat(a," global variable is not available."))})}function j(t,r){r===void 0&&(r=h()),m(t,r);var e=t.url,n=t.attributes;if(typeof e!="string"||e.length===0)throw new Error("Invalid url.");if(typeof n<"u"&&typeof n!="object")throw new Error("Expected attributes to be an object.");return new r(function(o,a){if(typeof window>"u")return o();S({url:e,attributes:n,onSuccess:function(){return o()},onError:function(){var i=new Error('The script "'.concat(e,'" failed to load.'));return window.fetch?fetch(e).then(function(d){return d.status===200&&a(i),d.text()}).then(function(d){var c=_(d);a(new Error(c))}).catch(function(d){a(d)}):a(i)}})})}function h(){if(typeof Promise>"u")throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function f(t){return window[t]}function m(t,r){if(typeof t!="object"||t===null)throw new Error("Expected an options object.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected PromisePonyfill to be a function.")}const P=w("paypal",()=>{const{createItems:t,updateItem:r}=v(),e=s(),n=e.pedido.total,o=g();return x({"client-id":"AauU5ZBGbHQmw4NSSD3m8p_JC5an_3cscA7RZ52dH0YBZsKa5Za-X8aPlxf1FkowqAb0phFjjETUUnCl",currency:"USD","data-page-type":"checkout"}).then(a=>{a.Buttons({createOrder:function(i,d){const c=s(),u=c.pedido.total;return d.order.create({purchase_units:[{amount:{value:u},description:"Renta de Auto "+c.pedido.carro.modelo+" o "+c.pedido.carro.clasificacion+" - "+c.pedido.cobertura.nombre,custom_id:"Hertz Rent a Car",soft_descriptor:"Hertz Rent a Car"}]})},onApprove:function(i,d){return d.order.capture().then(function(c){var u=[{nombre:e.pedido.cliente.nombre,apellido:e.pedido.cliente.apellido,email:e.pedido.cliente.email,telefono:e.pedido.cliente.telefono,licencia:e.pedido.cliente.licencia,nacimiento:e.pedido.cliente.nacimiento,retiro:e.pedido.sucursal.name,fecha_retiro:l(e.pedido.diaRetiro).format(),retorno:e.pedido.sucursalRetorno.name,fecha_retorno:l(e.pedido.diaRetorno).format(),carro:e.pedido.carro,cobertura:e.pedido.cobertura,dropoff:e.pedido.dropoff,sucursal_detail:e.pedido.sucursal,sucursal_retorno_detail:e.pedido.sucursalRetorno,extras:JSON.stringify(e.pedido.extras),status:"Pagado",tipo_pago:"Paypal",total:n}];if(e.pedido.pedidos_id!==""){console.log("TransacciÃ³n Aprobada"+e.pedido.pedidos_id);var b={status:"Pagado",tipo_pago:"Paypal"};r({collection:"pedidos_hertz",id:e.pedido.pedidos_id,item:b}),o.push("/thanks/")}t({collection:"pedidos_hertz",items:u}),o.push("/thanks/")})},onError:function(i){}}).render("#paypal-button").catch(i=>{console.error("failed to render the PayPal Buttons",i)})}).catch(a=>{console.error("failed to load the PayPal JS SDK script",a)}),{}});export{P as u};
