import{l as k,H as T,m as C,a as A,q as I,C as R,D as z,r as E,N as V,b as d,e,t as n,u as t,k as b,F as B,s as M,E as f,w as S,v as x,o as i,p as Y,j as w}from"./entry.970bf235.js";import{g as F}from"./get-asset-url.2ad900aa.js";import{u as N}from"./pedido.40310641.js";import{u as U}from"./actualizar.59027dd1.js";import{u as H}from"./paypal.1c34f95c.js";import{h as L}from"./moment.fbc5633a.js";import"./_commonjsHelpers.edff4021.js";const q=k("tarjeta",{state:()=>({orden:[],tarjeta:{ccnumber:"",ccexp:"",cvv:""}}),actions:{async onSubmit(){const u=this.orden.pedidos_id,_={security_key:"MDYevJ49jVF5cA8zzZ3ySYaC5A5G7AdH",first_name:this.orden.nombre,last_name:this.orden.apellido,address1:this.orden.retiro,city:"Panama City",state:"PTY",zip:"12345",shipping_first_name:this.orden.nombre,shipping_last_name:this.orden.apellido,shipping_address1:"987 State St",shipping_city:"Panama City",shipping_state:"PTY",shipping_zip:"98765",type:"sale",amount:this.orden.total,ccnumber:this.tarjeta.ccnumber,ccexp:this.tarjeta.ccexp,cvv:this.tarjeta.cvv};await $fetch("/api/tarjeta",{method:"POST",params:_,body:_}).then(function(y){const a=T();let p=y,r="response=1",D="response=2",g="response=3";if(p.includes(r)){const{updateItem:v}=C();console.log("Transacción Aprobada"+u);var j={status:"Pagado"};v({collection:"pedidos_hertz",id:u,item:j}),a.push("/thanks/")}else p.includes(D)?(console.log("Transacción Declinada"),a.push("/error/")):p.includes(g)&&(console.log("Error en el sistema"),a.push("/error/"))})}}});const s=u=>(Y("data-v-31a1e4b5"),u=u(),w(),u),G={class:"manage-pedido"},J=s(()=>e("h2",null," Tu reserva: ",-1)),O={class:"info-pedido"},Z=s(()=>e("em",null,"o similar",-1)),$=["src"],K={class:"info-cliente"},Q=s(()=>e("h6",null,"Detalles:",-1)),W=s(()=>e("dt",null," Nombre: ",-1)),X=s(()=>e("dt",null," Correo: ",-1)),ee=s(()=>e("dt",null," Telefono: ",-1)),te=s(()=>e("dt",null," Licencia: ",-1)),oe={class:"info-sucursal"},se=s(()=>e("h6",null,"Sucursal:",-1)),ne=s(()=>e("br",null,null,-1)),le=s(()=>e("br",null,null,-1)),ae=s(()=>e("dt",null," Día de Retiro: ",-1)),re=s(()=>e("dt",null," Día de Retorno: ",-1)),de=s(()=>e("dt",null," Drop-off ",-1)),ie={class:"info-coberturas"},ce=s(()=>e("h6",null,"Modelo:",-1)),ue=s(()=>e("h6",null,"Coberturas:",-1)),_e={key:0},pe={key:1},he=s(()=>e("dt",null," Asistencia Vial(ERA) ",-1)),me=s(()=>e("h6",null,"Extras:",-1)),fe={key:2,class:"extras"},be=s(()=>e("h6",null,"Sub-Total: ",-1)),ye=s(()=>e("dt",null,null,-1)),ge={key:3},ve=s(()=>e("h6",null,"Impuesto de Aeropuerto: ",-1)),Se=s(()=>e("dt",null,null,-1)),xe=s(()=>e("h6",null,"Impuesto: ",-1)),De=s(()=>e("dt",null,null,-1)),je=s(()=>e("h6",null,"Total: ",-1)),Pe=s(()=>e("dt",null,null,-1)),Ce={key:0,class:"status"},ke=s(()=>e("h4",null,"Esta reserva ya esta paga",-1)),Te=[ke],Ae={key:1,class:"status"},Ie=s(()=>e("h4",null,"El Pedido ha sido cancelado",-1)),Re=[Ie],ze={key:2,class:"metodos"},Ee={class:"tarjeta"},Ve=s(()=>e("label",null,"Número de la Tarjeta",-1)),Be=s(()=>e("label",null,"Fecha de Expiración",-1)),Me=s(()=>e("label",null,"CCV",-1)),Ye=s(()=>e("div",{id:"paypal-button"},null,-1)),we={key:3,class:"status"},Fe={__name:"[id]",async setup(u){let _,y;H();const a=N(),p=U(),r=q(),{getItemById:D,getItems:g}=C();I(()=>a.getPedido);let v={order_id:R().params.id};const o=([_,y]=z(()=>g({collection:"pedidos_hertz",params:{filter:v}})),_=await _,y(),_)[0];E(()=>{a.pedido=o,p.orden=o,r.orden=o});const P=function(m){if(m)return L(m).format("DD MMM YYYY hh:mm A")},h=function(m){if(m)return m.toLocaleString("en-US",{style:"currency",currency:"USD"})};return V({title:"Modificando Reserva | Hertz Rent a Car Panamá"}),(m,c)=>(i(),d("article",G,[J,e("section",O,[e("header",null,[e("div",null,[e("h3",null,n(t(o).carro.marca)+" "+n(t(o).carro.modelo),1),Z]),e("figure",null,[e("img",{src:t(F)(t(o).carro.imagen),loading:"lazy"},null,8,$)])]),e("section",K,[Q,e("dl",null,[W,e("dd",null,n(t(o).nombre)+" "+n(t(o).apellido),1)]),e("dl",null,[X,e("dd",null,n(t(o).email),1)]),e("dl",null,[ee,e("dd",null,n(t(o).telefono),1)]),e("dl",null,[te,e("dd",null,n(t(o).licencia),1)])]),e("section",oe,[se,e("dl",null,[e("dt",null,[b(" Retiro:"),ne,b(n(t(o).retiro),1)]),e("dd",null,[b(" Retorno: "),le,b(n(t(o).retorno),1)])]),e("dl",null,[ae,e("dd",null,n(P(t(o).fecha_retiro)),1)]),e("dl",null,[re,e("dd",null,n(P(t(o).fecha_retorno)),1)]),e("dl",null,[de,e("dd",null,n(h(t(o).dropoff)),1)])]),e("section",ie,[ce,e("dl",null,[e("dt",null,n(t(o).carro.tipo)+" ",1),e("dd",null,n(h(t(o).carro.precio_thrifty*t(a).diffDias(t(o).fecha_retorno,t(o).fecha_retiro))),1)]),ue,t(o).carro.tipo!="Sedan"?(i(),d("dl",_e,[e("dt",null,n(t(o).cobertura.nombre),1),e("dd",null,n(h(t(o).cobertura.precio_2*t(a).diffDias(t(o).fecha_retorno,t(o).fecha_retiro))),1)])):(i(),d("dl",pe,[e("dt",null,n(t(o).cobertura.nombre),1),e("dd",null,n(h(t(o).cobertura.precio*t(a).diffDias(t(o).fecha_retorno,t(o).fecha_retiro))),1)])),e("dl",null,[he,e("dd",null,n(h(t(o).era*t(a).diffDias(t(o).fecha_retorno,t(o).fecha_retiro))),1)]),me,t(o).extras?(i(),d("dl",fe,[(i(!0),d(B,null,M(t(o).extras,l=>(i(),d("div",null,[e("dt",null,n(l.nombre),1),e("dd",null,n(h(l.precio*t(a).diffDias(t(o).fecha_retorno,t(o).fecha_retiro))),1)]))),256))])):f("",!0),be,e("dl",null,[ye,e("dd",null," B/. "+n(t(o).sub_total),1)]),t(o).impuesto_aeropuerto>0?(i(),d("div",ge,[ve,e("dl",null,[Se,e("dd",null," B/. "+n(t(o).impuesto_aeropuerto),1)])])):f("",!0),xe,e("dl",null,[De,e("dd",null," B/. "+n(t(o).impuesto),1)]),je,e("dl",null,[Pe,e("dd",null," B/. "+n(t(o).total),1)])]),e("footer",null,[b(n(t(o).status)+" ",1),t(o).status==="Pagado"?(i(),d("div",Ce,Te)):f("",!0),t(o).status==="Cancelado"?(i(),d("div",Ae,Re)):f("",!0),t(o).status==="Pendiente de Pago"?(i(),d("section",ze,[e("section",Ee,[e("p",null,[Ve,S(e("input",{type:"text",placeholder:"0000 0000 0000 000",name:"ccnumber","onUpdate:modelValue":c[0]||(c[0]=l=>t(r).tarjeta.ccnumber=l)},null,512),[[x,t(r).tarjeta.ccnumber]])]),e("p",null,[Be,S(e("input",{type:"text",placeholder:"01 / 26",name:"ccexp",class:"ccexp","onUpdate:modelValue":c[1]||(c[1]=l=>t(r).tarjeta.ccexp=l)},null,512),[[x,t(r).tarjeta.ccexp]])]),e("p",null,[Me,S(e("input",{type:"text",placeholder:"123",name:"cvv",class:"cvv","onUpdate:modelValue":c[2]||(c[2]=l=>t(r).tarjeta.cvv=l)},null,512),[[x,t(r).tarjeta.cvv]])]),e("button",{type:"submit",onClick:c[3]||(c[3]=(...l)=>t(r).onSubmit&&t(r).onSubmit(...l))},"Pagar")]),Ye])):f("",!0),t(o).status==="Pendiente de Pago"?(i(),d("div",we,[e("button",{type:"submit",onClick:c[4]||(c[4]=(...l)=>t(p).onCancelar&&t(p).onCancelar(...l))},"Cancelar Reserva")])):f("",!0)])])]))}},Ze=A(Fe,[["__scopeId","data-v-31a1e4b5"]]);export{Ze as default};
